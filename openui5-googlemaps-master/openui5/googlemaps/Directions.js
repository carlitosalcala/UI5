sap.ui.define(["jquery.sap.global","sap/ui/core/Control","google.maps","./TravelMode"],function(e,t,s,i){"use strict";var r=t.extend("openui5.googlemaps.Directions",{metadata:{properties:{startAddress:{type:"string",bindable:"bindable"},endAddress:{type:"string",bindable:"bindable"},travelMode:{type:"string",defaultValue:i.driving}},events:{response:{}},renderer:{}}});return r.prototype.setStartAddress=function(e){this.setProperty("startAddress",e,!0),this.route()},r.prototype.setEndAddress=function(e){this.setProperty("endAddress",e,!0),this.route()},r.prototype.setTravelMode=function(e){this.setProperty("travelMode",e,!0),this.route()},r.prototype.onMapRendered=function(e){this.map=e,this.mapChanged()},r.prototype.responseChanged=function(){this.directions&&this.response&&this.directions.setDirections(this.response)},r.prototype.mapChanged=function(){this.directions||(this.directions=new s.DirectionsRenderer),this.directions.setMap(this.map),this.route()},r.prototype.getRequest=function(){var e={};return e.origin=this.getStartAddress(),e.destination=this.getEndAddress(),e.travelMode=this.getTravelMode(),e},r.prototype.route=function(){this.map&&this.getStartAddress()&&this.getEndAddress()&&(this.directionsService||(this.directionsService=new s.DirectionsService),e.sap.clearDelayedCall(this.delayedCallId),this.delayedCallId=e.sap.delayedCall(0,this,function(){this.directionsService.route(this.getRequest(),e.proxy(this.routeResponse,this))}))},r.prototype.routeResponse=function(e,t){t===s.DirectionsStatus.OK&&(this.response=e,this.responseChanged(),this.fireResponse({response:e}))},r.prototype.reset=function(){this.directions&&(this.directions.setMap(null),this.directions=null)},r.prototype.onReset=function(){this.reset()},r.prototype.exit=function(){this.reset()},r},!0);